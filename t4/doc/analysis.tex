\section{Theoretical Analysis}
\label{sec:analysis}

In the following sections of the operating point and Incremental Analysis, we use the mathematical formulas presented in the slides
and that were provided in the Octave script.

\subsection{Gain Stage}


\textbf{Operating point}

By studying the operating point of the gain stage, we got the results presented in table section Side by side Comaprison.
The values of the tensions and currents in Operating Point were evaluated using the following equations:


\textbf{Incremental Analysis}

In order to be able to analyse the behaviour of the output stage in the AC state, we use the Bipolar transistor small signall model(AC) presented in the lectures.

The results of the we gain and the impedances of this stage are presented in a table in section Simulation, where we do a comparison between both models.



\subsection{Output Stage}

\textbf{Operating Point}

The results of this process are presented in a table in section Simulation. where we do a comparison between both models.

\textbf{AC analysis}

In this section, we use the Bipolar transistor small signall model(AC) presented in the lectures as a model for the transistor.
The results we got are presented in a table.

\subsection{Final Results}

The results of thid section are presented in a table in section Simulation too.

So, as we can see the large difference between the values of the output impedances the circuit of
the gain stage and the input impedance of the output stage garantees that we can connect them without
a significant signal loss.
In fact, the input impedance of the output stage is $\approx 9.7$ greater than the output impedance ot the gain stage,
which justifies what was said in the previous sentence.

\subsection{Frequency Response}

In order to be able to understand the behaviour of the whole circuit in reponse of to the input ac voltage source witha
a range of frequencies from 10Hz to 1MHz.
So we use the Bipolar transistor small signall model(AC) for the transistor and we add the coupling and the bypass capacitor as presented in
Ngspice. The coupling capacitor of the gain stage is $Ci$, the coupling capacitor of the ouput stage is $Co$ and the bypass
capacitor of the gain stage(is in parallel with the resistor of the emitter, $R_e$) is $Cb$.

\[
  \begin{bmatrix}
    R_{S} + Z_{C1} + R_{B} & -R_{B }                                 & 0                                     & 0                    & 0                           & 0      & 0               \\
    -R_{B}                 & R_{B} + r_{\pi 1} + Z_{Re \parallel Ci} & 0                                     & -Z_{Re \parallel Ci} & 0                           & 0      & 0               \\
    0                      & r_{\pi 1} gm1                           & 1                                     & 0                    & 0                           & 0      & 0               \\
    0                      & -Z_{Re     \parallel Ci} - r_{o1}       & Z_{Re \parallel Ci} + r_{o1} + R_{C1} & -R_{C1}              & 0                           & 0      & 0               \\
    0                      & 0                                       & 0                                     & -R_{C1}              & r_{\pi 2} + R_{C1} + Z_{eq} & 0      & -Z_{eq}         \\
    0                      & 0                                       & 0                                     & 0                    & r_{\pi 2} gm2               & 1      & 0               \\
    0                      & 0                                       & 0                                     & 0                    & -Z_{eq}                     & r_{o2} & Z_{eq} + r_{o2} \\
  \end{bmatrix}
  \begin{bmatrix}
    i_1 \\ i_2  \\ i_3 \\ i_5 \\ i_6 \\ i_7
  \end{bmatrix}
  =
  \begin{bmatrix}
    v_{in} \\ 0 \\ 0 \\ 0 \\ 0  \\ 0 \\ 0
  \end{bmatrix}
\]

where $Z_{C1} = \frac{1}{j \omega Ci} \hspace{1cm} Z_{C2} = \frac{1}{j \omega Cb} \hspace{1cm} Z_{C3} = \frac{1}{j \omega Co}$
and Zeq is the impedance of resistor Re in parallel with the equivalent impedance of the capacitor Co and the load,


And so we calculate the gain in DB using the following formula:

\begin{equation}
  Gain_DB(f) =20 \log{abs\frac{(I(7) - I(5)) * Zeq \frac{R_{load}}{R_{load} + ZC3}}{vin}}
\end{equation}

The plot we get is presented in section Simulation.

As we can see, the behaviour of both plots for small frequencies is quite similar. However, for much bigger frequencies, the plots present very different
behaviours. The Ngspice one as expected has a passband in gain. On the Octave one, we do not see this. The theoretical model predicts that the
high cut off is $\infty$ which is of course not correct for the Amplifier.
This behaviour is due to the fact that we use the for model transistor in AC signal presented in the lectures that do not include capacitors.





